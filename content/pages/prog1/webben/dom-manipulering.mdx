---
title: "DOM-manipulering"
date: "2020-10-05"
---

JavaScript har sitt ursprung i webbutveckling, och utvecklades specifikt till att vara ett sätt att skapa interation till hemsidor. Den gör detta genom att manipulera Dokument Objekt Modellen.

# Begrepp

| Begrepp                 | Betydelse                                                                                                                        |
| ----------------------- | -------------------------------------------------------------------------------------------------------------------------------- |
| **HTML**                | Hyper Text Markup Language - strukturerat sätt att visa innehåll på en hemsida.                                                  |
| **DOM**                 | Document Object Model - webbläsaren läser in HTML och lägger in varje element som ett objekt som kan manipuleras med javascript. |
| **Gränssnitt/UI**       | User Interface, användargränssnitt. Sättet som användaren använder (interagerar) med applikationen/skriptet.                     |
| **Element**                        | Ett element är det som skapas av att använda en tagg i HTML (tex `<p>`)                                                                                                                                 |
| **Objekt**              | Ett objekt i programmering är en grupper av egenskaper som delar samma syfte.                                                                                                                                 |
| **Egenskap (property)** | En egenskap är som en variabel men som existerar för att definiera något hos ett objekt. Håller alltså ett värde.                                                                                                                                 |
| **Metod (method)**      | En metod är en funktion som existerar på ett objekt. Används oftast för att förändra objektets egenskaper eller göra något med objektet.                                                                                                                                 |


# Lägga till JavaScript till en hemsida

Det finns två sätt att lägga in JavaScript i ett html-dokument; Importera en js-fil via script-taggen, eller direkt inuti script-taggen.

## Importera .js-fil

```html
<script src="myScript.js"></script>
<!-- Mitt script finns i myScript.js-filen -->
```

## Inuti script-taggen

```html
<script>
  // Mitt script här
</script>
```


# Välja vad som ska manipuleras

Vi kan välja specifika element som vi vill manipulera, och detta görs på samma sätt som vi väljer element att stila i CSS. I JavaScript använder vi olika funktioner för att välja elementen;

| Metod                                         | Förklaring                                                  |
| --------------------------------------------- | ----------------------------------------------------------- |
| `document.getElementById("ID")`               | Väljer ett element med hjälp av dess ID                     |
| `document.getElementsByTagName("Tagg")`       | Väljer alla element med hjälp av dess tagnamn               |
| `document.getElementsByClassName("Class")`    | Väljer ett element med hjälp av dess klassnamn              |
| `document.querySelector("Selector query")`    | Väljer första elementet som matchar den query man skriver i |
| `document.querySelectorAll("Selector query")` | Väljer alla element som matchar den query man skriver i     |


# Manipulera element

Manipulera innebär att förändra ett attribut på ett element, alltså att ändra något på en del av sidan. Vi kan ändra ett elements innehåll, stilen, lägga till eller ta bort klasser, och mer.

| Attribut/funktion                       | Förklaring                                                                           |
| --------------------------------------- | ------------------------------------------------------------------------------------ |
| `element.textContent`                     | Ändrar texten inuti elementet                                                        |
| `element.innerHTML`                     | Ändrar HTML-koden inuti elementet                                                    |
| `element.style`                         | Ett objekt som vi kan läsa/skriva css från/till                                      |
| `element.classList.add("klassnamn")`    | Lägg till en specificera klass till elementet                                        |
| `element.classList.remove("klassnamn")` | Ta bort den specificerade klassen från elementet                                     |
| `element.classList.toggle("klassnamn")` | Om elementet saknar den specificerade klassen så läggs den till, annars tas den bort |



# Lägga till och ta bort element

Vi kan skapa nya element och lägga till dem till vår sida. Det gör vi genom att först skapa elementet, lägga till innehåll i det, och sedan välja ett element som det nya elementets parent element (där det nya elemetet ska ligga inuti), och sedan lägga till elementet.

> När vi skapar ett element så behöver vi specificera elementets tagg-namn, till exempel `div` eller `p`.

> För att lägga till innehåll till elementet vi skapat så använder vi `.textContent` eller `.innerHTML`, och sedan en sträng (mening). Med `.textContent` så kan vi bara lägga till text, men med `.innerHTML` kan vi lägga till HTML, till exempel element.

> Vi använder `.appendChild()` för att lägga till vårt nya element till dess parent element.

### Till exempel så här:

```javascript
let newParagraph = document.createElement("p") // Det nya elementet vi skapar

newParagraph.textContent = "Detta är min nya paragraf!"

const parentElement = document.querySelector("#parentArticle") // Det element vi vill lägga det nya elementet i
parentElement.appendChild(newParagraph)
```

# Övningar
Gör följande övningar enskild eller i grupp om 2-3.


## Övning 1
Lägg till en paragraf med en span i sig på din sida, så här;
```html
<p>Coin toss: <span id="coin-result"></span></p>
```

Följande kod skriver ut 0 eller 1 i konsolen. Använd och modifiera koden så att den istället ändrar spanen `coin-result` så att den antingen visar Heads eller Tails, där Heads är om result blir 1 och Tails är om resultatet blir 0.

```javascript
let result = Math.round(Math.random());
console.log(result);
```


## Övning 2

Bing AI har genererat tre skämt som du ska lägga till i varsin paragraf på din sida med hjälp av javascript:

1.  Varför var programmeraren så dålig på att simma? Han försökte använda en tangentbordsgenväg för att simma snabbare.
2. Varför var datorn kall? Den hade öppnat Windows.
3. Varför var spelaren så bra på att spela? Han hade övat i flera timmar varje dag.

Skriv koden så effektivt som du kan, med tekniker vi gått igenom i kursen.

## Övning 3
Skapa en counter som räknar sekunder (ditt skript ska alltså uppdatera textinnehållet i ett element en gång varje sekund) - detta krävs att du hittar information om hur man hanterar tidsintervall i javascript. Du kan använda internetsökning eller en AI för den hjälpen.


# Källor

- [MDN Web Docs sida om Document Object Model](https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction)
- [Manipulating documents](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Client-side_web_APIs/Manipulating_documents)
- [Svensk förklaring om Document Object Model och JavaScript](http://htmlhunden.se/dist/04-05-js-dom.html)
- [Svensk guide om DOM-manipulering](https://dbwebb.se/guide/javascript1/html_dom)
