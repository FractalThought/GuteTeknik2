---
title: "Strängmanipulation"
date: "2020-09-01"
---

Strängar i programmering kommer från engelska ordet "string", och är en förkortning på "string of characters", alltså en sträng av tecken. En sträng, eller string, är en datatyp i de flesta programmeringsspråk, och innehåller alltså ett antal tecken, vad vi i vanlig mun skulle kalla ett ord eller en mening.

Strängmanipulation (string manipulation) handlar om att hantera och ändra texter (strängar) och är ett essentiellt verktyg när man hanterar data i form av text. Detta kallas ibland för textformattering, då man ändrar formatet 

Vi har gjort en grundläggande strängmanipulering redan, när vi lägger ihop texter som vi ska skriva ut i konsolen, så här;

```javascript
let firstName = "Alfred";
console.log("Hej " + firstName + "!"); // skriver ut "Hej Alfred!" i konsolen
```

Att lägga ihop strängar så här kallas Konkatenering (concatination på engelska). Ordet kommer från latinska *catena* (kedja) och prefixen *con* (tillsammans med), så det betyder att kedja ihop något.

I JavaScript sker konatenering automatiskt när något värde läggs ihop med en sträng genom plustecknet (+), i andra språk kan du först behöva omvandla värden som inte är strängar till en sträng innan de läggs ihop, och andra språk kan använda ett annat tecken. Exempel på detta är PHP som använder punkt-tecknet (.) för att lägga ihop strängar.

# Strängmetoder
Det finns många sätt som vi kan använda för att manipulera text. Dessa sker oftast genom användandet av metoder liknande den vi använt för att skriva ut till konsolen (`console.log()`)

## Split
Split delar upp en sträng i mindre delar.

## Substr
Substr (ska inte förväxlas med metoden substring) gör att vi kan ta ut en del av en sträng med hjälp av en startposition och en längd. Substr är bra att använda när vi vill ta ut ett antal bokstäver från en särskild position.

```javascript
let myMessage = "Alfred gillar kexchoklad";
let manipulatedMessage = myMessage.substr(7, 6);

console.log(manipulatedMessage); // Skriver ut "gillar"
```


## Slice
Slice gör att vi kan ta ut en del av en sträng med hjälp av en startposition och en slutposition. Slutpositionen måste inte anges, och då kommer slice ta ut allt från startpositionen och framåt.

```javascript
let myMessage = "Alfred gillar kexchoklad";
let manipulatedMessage = myMessage.slice(0, 16); // Observera att i programmering börjar man alltid räkna från 0

console.log(manipulatedMessage); // Skriver ut "Alfred gillar kex".

```


## toLowerCase och toUpperCase
Något som är ganska vanligt när man hanterar användarinput är att man vill sätta alla bokstäver till stora eller små bokstäver (versaler eller gemener). Detta är särskilt användbart när man vill jämföra texter med varandra, eftersom en sträng skriven med stora bokstäver kommer inte kännas igen som likadan som en sträng skriven med små bokstäver även om texterna egentligen innehåller samma bokstäver (`"Hej"` är alltid inte samma som `"hej"`).

Därför kan man använda `toLowerCase()` eller `toUpperCase()`, så här:

```javascript
let message = "Hej!";
messageLower = message.toLowerCase();
console.log(messageLower); // Skriver ut "hej!"

messageUpper = message.toUpperCase();
console.log(messageUpper); // Skriver ut "HEJ!"

if(message == messageLower) {
    /* Detta kommer inte vara sant, eftersom ena är blandat stora och små bokstäver men andra är bara stora bokstäver. */
}
```


## indexOf
Om vi vill hitta en del av en sträng, till exempel se om ett ord innehåller ett specifikt tecken, eller om en mening innehåller ett ord, så kan du använda metoden indexOf. indexOf hittar första instansen och skickar tillbaka positionen på första tecknet i ordet, eller `-1` om det du letar efter inte finns.

indexOf körs på en sträng, och tar ett argument för vad som ska kollas, så här:

```javascript
let message = "Hej Alfred! Hur mår du?";
let searchName = "Alfred"
let indexOfName = message.indexOf(searchName);

console.log(indexOfName); // Skriver ut 4
```

Vi kan göra en koll på värdet som kommer tillbaka för att kolla om söktermen finns eller inte, så här;

```javascript
let message = "Hej Alfred! Hur mår du?";
let searchName = "Kalle"
let indexOfName = message.indexOf(searchName);

if(indexOfName == -1) {
    console.log(searchName + " finns inte i meningen " + message);
    // skriver ut "Kalle finns inte i meningen Hej Alfred! Hur mår du?"
}
```

Om vi letar efter andra gången en sökterm kommer så behöver vi göra följande;
1. Hitta positionen av första gången söktermen finns.
2. Använda andra argumentet i indexOf, vilket gör att vi börjar kolla från den positionen (tex `message.indexOf("Hej", 5) // börjar titta från position 5`).
3. Använda positionen av första söktermen plus 1 

Så här:

```javascript
let message = "Norrahammar ligger norr om Taberg";
message = message.toLowerCase(); // vi gör om till små bokstäver så vi hittar alla oavsett stor eller liten bokstav, eftersom indexOf gör skillnad på små och stora bokstäver
let firstIndex = message.indexOf("norr"); // hittar första gången ordet finns
let secondIndex = message.indexOf("norr", firstIndex+1) // Hittar andra gången ordet finns

console.log("Ordet norr finns på positionerna " + firstIndex + " och " + secondIndex);
```

Detta kan vi potentiellt upprepa tills vi inte längre , men det gör vi enklast med en loop.

# Källor
[Text formatting på Mozilla Developer Network](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Text_formatting)