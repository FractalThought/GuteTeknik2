---
title: "Strängmanipulation"
date: "2020-09-01"
---

Strängar i programmering kommer från engelska ordet "string", och är en förkortning på "string of characters", alltså en sträng av tecken. En sträng, eller string, är en datatyp i de flesta programmeringsspråk, och innehåller alltså ett antal tecken, vad vi i vanlig mun skulle kalla ett ord eller en mening, eller helt enkelt *text*.

**Strängmanipulation** (*string manipulation*) handlar om att hantera och ändra texter (strängar) och är ett essentiellt verktyg när man hanterar data i form av text. Detta kallas ibland för textformattering, då man ändrar formatet, hur texten är strukturerad. *Textformattering* på svenska brukar dock också användas när vi pratar om att göra text fetmarkerad, ändra storleken, och så vidare i en dokumentredigerare så som **Microsoft Word**.

# Konkatenering

Vi har gjort en grundläggande strängmanipulering redan, när vi lägger ihop texter som vi ska skriva ut i konsolen, så här;

```javascript
let firstName = "Alfred";
console.log("Hej " + firstName + "!"); // skriver ut "Hej Alfred!" i konsolen
```

Att lägga ihop strängar så här kallas Konkatenering (concatination på engelska). Ordet kommer från latinska *catena* (kedja) och prefixen *con* (tillsammans med), så det betyder att kedja ihop något.

I JavaScript sker konatenering automatiskt när något värde läggs ihop med en sträng genom plustecknet (+), i andra språk kan du först behöva omvandla värden som inte är strängar till en sträng innan de läggs ihop, och andra språk kan använda ett annat tecken. Exempel på detta är PHP som använder punkt-tecknet (.) för att lägga ihop strängar.

# Strängmetoder
Det finns många sätt som vi kan använda för att manipulera text. Dessa sker oftast genom användandet av metoder liknande den vi använt för att skriva ut till konsolen (`console.log()`). Skillnaden är att vi kör metoden "på variabeln", så här;

```javascript
let sentence = "Hej På Er Alla!";
console.log(sentence.toLowerCase()); // Skriver ut "hej på er alla!"
```

Detta fungerar för *string*, som våra strängvariabler är, är en datatyp som är definierad i javascript och innehåller metoder och egenskaper som vi kan nyttja. datatyp kallas även primitiva värden, datastrukturer, och i javascript kallas det ibland även prototype, men det är ganska avancerat så vi kan hålla oss just nu till att **variabler vi skapar har metoder som vi kan använda**.

För att köra en metod på en variabel, skriv variabelns namn efter du skapat den, och tryck på punkt, följt av metodens namn, följt av parateser och eventuellt ett eller flera argument som ska skickas med.

## Argument

När vi kör en metod har vi möjlighet att skicka med eventuell information som kan behövas eller som kan ändra vad metoden gör. Detta kallas att vi skickar in ett värde som argument till metoden. Begreppet parameter finns också, men vi tar det senare när vi ska skapa våra egna funktioner.

Vi har redan använt argument när vi använt `console.log()`. Den mening vi skickat in mellan paranteserna är ett argument, som för den här metoden är meningen som ska skrivas ut i konsolen.

# Returneringar

String-datatypen i Javascript är så kallad immutable. Vad det innebär är att vi kan inte förändra den via metoder på sig själv. Vi kan sätta om texten med operatorerna `=` och `+=`, men en metod så som `.split()` förändrar inte strängen i sig. Vad den istället gör är att den manipulerar texten och *returnerar* den manipulerade texten.

*Returnering* kan tänkas som att en metod skickar tillbaka ett resultat när den är färdig. Om vi tänker en funktion som ska lägga ihop två värden, så förväntar vi oss att få ett svar från den funktionen, att vi får något i retur. Detta retur är ett värde som vi kan spara i en variabel precis som om vi skulle sätta en varibel till ett fast värde.

För alla strängmetoder nyttjar vi returvärdet för värdet vi vill få ut av att använda metoden. Den ursprungliga variabeln ändras aldrig.

```javascript
let sentence = "Hej På Er Alla!";
let allLowerCase = sentence.toLowerCase();
console.log(allLowerCase); // hej på er alla!
console.log(sentence); // Hej På Er Alla!
```

# Substring
Substring (ska inte förväxlas med metoden substr) gör att vi kan ta ut en del av en sträng med hjälp av en startposition och en slutposition. Substring är bra att använda när vi vill ta ut en del av en sträng utifrån specifika positioner.

```javascript
let myMessage = "Alfred gillar kexchoklad";
let manipulatedMessage = myMessage.substr(7, 13);

console.log(manipulatedMessage); // Skriver ut "gillar"
```


# Slice
Slice gör att vi kan ta ut en del av en sträng med hjälp av en startposition och en slutposition. Slutpositionen måste inte anges, och då kommer slice ta ut allt från startpositionen och framåt.

```javascript
let myMessage = "Alfred gillar kexchoklad";
let manipulatedMessage = myMessage.slice(0, 16); // Observera att i programmering börjar man alltid räkna från 0

console.log(manipulatedMessage); // Skriver ut "Alfred gillar kex".

```


# toLowerCase och toUpperCase
Något som är ganska vanligt när man hanterar användarinput är att man vill sätta alla bokstäver till stora eller små bokstäver (versaler eller gemener). Detta är särskilt användbart när man vill jämföra texter med varandra, eftersom en sträng skriven med stora bokstäver kommer inte kännas igen som likadan som en sträng skriven med små bokstäver även om texterna egentligen innehåller samma bokstäver (`"Hej"` är alltid inte samma som `"hej"`).

Därför kan man använda `toLowerCase()` eller `toUpperCase()`, så här:

```javascript
let message = "Hej!";
messageLower = message.toLowerCase();
console.log(messageLower); // Skriver ut "hej!"

messageUpper = message.toUpperCase();
console.log(messageUpper); // Skriver ut "HEJ!"

if(message == messageLower) {
    /* Detta kommer inte vara sant, eftersom ena är blandat stora och små bokstäver men andra är bara stora bokstäver. */
}
```

# replace och replaceAll

Replace använder vi för att ersätta tecken i en sträng. Skillnaden mellan replace och replaceAll är att replace endast ersätter första instansen av tecknet den hittar i strängen, och 

Båda funktionerna tar två argument; Vad den ska söka efter, och vad den ska ersätta med. Den fungerar på liknande sätt som ersättningsfunktioner i ordbehandlingsprogram så som Word eller textredigeringsprogram så som Visual Studio Code.

Det du söker efter är exakt, och kan vara allt från ett enskilt tecken, till en hel mening eller mer. Notera att replace och replaceAll är case-sensitive, så tänk på om du ska ersätta en stor bokstav eller en liten bokstav.

Det du ersätter kan vara en tom sträng, vilket betyder att strängen du söker efter tas bort.

Tekniskt kallas det att man söker efter en substring (delsträng) i en string.

## Regex

Regex står för Regular Expression (reguljära uttryck) och är ett sätt att skapa mönster som funktioner så som replace kan använda för att matcha mer komplexa substrängar. Till exempel kan Regex användas för att hitta och ersätta alla instanser av olika tecken, hitta vilket av en grupp tecken som kommer först i en mening, eller mer komplexa saker så som "alla I som kommer direkt efter E" eller verifiera att en sträng är en email-adress.

Regex kan vara svårt att läsa och förstå, och räknas ofta som en specialisering inom programmering/datorvetenskap. Reguljära uttryck är dock effektiva och kraftfulla, men många väljer att lära sig specifika uttryck, fråga andra, och söka efter vanliga uttryck istället för att lära sig det från grunden.

Mer om Regex hittar du här:
- https://dbwebb.se/kunskap/regex
- https://regexr.com/
- https://regex101.com/
- https://medium.com/factory-mind/regex-cookbook-most-wanted-regex-aa721558c3c1


# indexOf
Om vi vill hitta en del av en sträng, till exempel se om ett ord innehåller ett specifikt tecken, eller om en mening innehåller ett ord, så kan du använda metoden indexOf. indexOf hittar första instansen och skickar tillbaka positionen på första tecknet i ordet, eller `-1` om det du letar efter inte finns.

indexOf körs på en sträng, och tar ett argument för vad som ska kollas, så här:

```javascript
let message = "Hej Alfred! Hur mår du?";
let searchName = "Alfred"
let indexOfName = message.indexOf(searchName);

console.log(indexOfName); // Skriver ut 4
```

Vi kan göra en koll på värdet som kommer tillbaka för att kolla om söktermen finns eller inte, så här;

```javascript
let message = "Hej Alfred! Hur mår du?";
let searchName = "Kalle"
let indexOfName = message.indexOf(searchName);

if(indexOfName == -1) {
    console.log(searchName + " finns inte i meningen " + message);
    // skriver ut "Kalle finns inte i meningen Hej Alfred! Hur mår du?"
}
```

Om vi letar efter andra gången en sökterm kommer så behöver vi göra följande;
1. Hitta positionen av första gången söktermen finns.
2. Använda andra argumentet i indexOf, vilket gör att vi börjar kolla från den positionen (tex `message.indexOf("Hej", 5) // börjar titta från position 5`).
3. Använda positionen av första söktermen plus 1 

Så här:

```javascript
let message = "Norrahammar ligger norr om Taberg";
message = message.toLowerCase(); // vi gör om till små bokstäver så vi hittar alla oavsett stor eller liten bokstav, eftersom indexOf gör skillnad på små och stora bokstäver
let firstIndex = message.indexOf("norr"); // hittar första gången ordet finns
let secondIndex = message.indexOf("norr", firstIndex+1) // Hittar andra gången ordet finns

console.log("Ordet norr finns på positionerna " + firstIndex + " och " + secondIndex);
```

Detta kan vi potentiellt upprepa tills vi inte längre , men det gör vi enklast med en loop.

# Split
Split delar upp en sträng i mindre delar och lägger den i en array. Man använder en sträng för att dela strängen (till exempel för att dela på ord använder du `" "`, ett mellanslag, som delare). Vi kommer använda arrayer senare, tills vidare behöver du veta att split kan användas för att dela upp en sträng så man kan till exempel skriva ut något ord för ord, eller på annat sätt separera ut värden ur en sträng.

```javascript

let input = "Emil i Lönneberga";
let inputArray = input.split("");

// Skriver ut varje ord för sig
for (let i = 0; i < inputArray.length; i++) {
    console.log(inputArray[i]);
}

```


# Läs vidare

På [Mozilla Developer Network finns mer information om text formatting](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Text_formatting)