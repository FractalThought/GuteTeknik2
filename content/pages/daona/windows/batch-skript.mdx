---
title: "Batch-skript"
date: "2021-12-10"
---

Batch-skript, ofta kallad Bat-skript tack vare filändelsen som skripten använder (.bat) är ett skript som kör av Kommandotolken och innehåller flera kommandon som Kommandotolken kan använda. Namnet kommer från Batch processing som betyder att processera flera saker (batch = omgång eller sats).

En bat-fil är egentligen en textfil men med filändelsen _.bat_ vilket gör att när vi öppnar filen normalt så startar Kommandotolken och kör kommandona som står i.

Batch-skript är ett sätt för oss att automatisera kommandon i Windows och fungerar som ett high-level programmeringsspråk.

## Skapa bat-filer

För att skapa en bat-fil, öppna en vanlig så kallad plain text editor, till exempel **Anteckningar** eller **VSCode**.
Börja skriva skriptet, och när det är dags att spara - spara filen med filändelsen .bat.

Alternativt kan du skapa en bat-fil genom att högerklicka i Utforskaren i en folder där du vill ha skriptet (Skrivbordet fungerar också) och välj **Nytt > Textdokument**. Då skapas en .txt-fil, som du nu kan göra om till en .bat-fil genom att ta bort .txt och ersätta med .bat. Du kommer få en dialogruta som frågar om du menade att ändra filändelsen, tryck Ja.

För att detta ska fungera så behöver du ha visningsinställningarna inställda på att inte dölja kända filändelser. Om du inte vet hur du gör det - kollade med din lärare, eller googla på hur man gör.

## Öppna bat-filer

För att öppna en bat-fil så vi kan redigera den så högerklickar vi på filen och väljer **Öppna med**. Man kan öppna bat-filer i en plain text editor (Anteckningar, VSCode).

<Notice>

Bat-filer körs från foldern där du startar skriptet. Är foldern i `C:/Projekt` till exempel, så kommer den arbeta från den foldern.

</Notice>

# Vad kan Batch-skript göra?

Ett Batch-skript kan göra allt som Kommandotolken kan göra (se [Doskommandon](https://guteteknik.netlify.app/daona/windows/doskommandon/)). Fördelen med Batch-skript är just att kunna köra flera kommandon i rad, och använda det för att automatisera saker.

Batch-skript kan inhämta input från användaren eller genom argument som skickas med när skriptet startar, lagra dem i variabler och sedan använda dem.

Batch-skript har även möjligheten att använda sig av logik så som loopar och kontrollsatser (ifsatser). Batch-skript kan bli ganska avancerat, så det är bra att börja med grunderna.

En annan fördel är att man kan sätta så att ett Batch-skript startar när datorn startar, om man till exempel vill starta några program i samband med att datorn startar.

# Variabler

Kommandot **SET** lagrar ett värde i minnet så den kan användas senare. Detta kallas att man skapar en variabel.

## Syntax:

`SET /A variable-name=value`.
- **variable-name** är variabelns namn.
- **value** är värdet som variabeln sätts till.
- **/A** är en växel som används om värdet ska vara en siffra (integer) och kunna användas i beräkningar. Annars tolkas värdet som en mening (sträng). Observera att endast heltal kan användas.

## Exempel:

```
set message=Hello World
echo %message%
```

Detta sätter värdet message till värdet Hello World och skriver sedan ut det i konsolen med kommandot **ECHO**. Observera att du inte ska ha något mellanslag runt likamed-tecknet.

<Notice half="true">

När du stöter på skript med flera rader, kör en rad i taget, eller skapa ett Batch-skript.

</Notice>

## Numeriska värden

**/A**-växeln gör att vi kan sätta numeriska värden och utföra kalkylationer på dessa, så här:


```
SET /A a = 5 
SET /A b = 10 
SET /A c = %a% + %b% 
echo %c%
```

Samtliga aritmiska operatorer fungerar (addition `+`, subtraktion `-`, multiplikation `*`, division `/`).

<Notice>
För icke-numeriska värden konkateneras värdena istället, så resultatet av exemplet ovan hade blivit 510 istället för 15.
</Notice>

## Hämta input från användaren
Genom att använda växeln **/P** kan vi hämta in ett värde från användaren. Detta kallas att man "promptar" användaren för ett värde.

### Syntax:
`SET /P variable-name=PromptString`

PromptString i det här fallet är ett meddelande som visas för användaren, och variable-name är variabeln som lagrar användarens input.

### Exempel:

```
SET /P username=Enter your username: 
ECHO Hello %username%!
```

Första raden promptar användaren för ett värde (i det här fallet ett användarnamn), och lagrar det i variabeln *username*.

Andra raden skriver ut Hello följt av värdet på variabeln *username*, och avslutar med ett utropstecken.

# Källor

[Tutorial om Batch-skript](https://www.tutorialspoint.com/batch_script/index.htm)

[Mer ingående om variabler](https://www.tutorialspoint.com/batch_script/batch_script_variables.htm)

[Batch-rename folders and files](https://www.makeuseof.com/tag/batch-rename-mass-delete-files-windows/)